{% extends "layout.html" %}
{% block content %}
<div class="notice-box">
  <strong>ğŸ“¢ æ³¨æ„äº‹é¡¹ï¼š</strong><br>
  åœ¨æ‚¨çš„é‚®ä»¶ HTML ä¸­åµŒå…¥ä»¥ä¸‹åƒç´ è¿½è¸ªä»£ç ï¼š<br>
  <code>&lt;img src=&quot;https://email-tracker-y1k4.onrender.com/track/YOUR_ID.png&quot; width=&quot;1&quot; height=&quot;1&quot;&gt;</code><br>
  è¯·å°† <code>YOUR_ID</code> æ›¿æ¢ä¸ºæ‚¨ä¸ºè¯¥é‚®ä»¶è®¾ç½®çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚
</div>

<form method="get" class="filters">
  <!-- å‰ç¼€ç­›é€‰ -->
  <label>Tracking ID åˆ†ç»„:
    <select name="prefix">
      <option value="">â€” å…¨éƒ¨ â€”</option>
      {% for p in prefixes %}
      <option value="{{ p }}" {% if p==sel_pref %}selected{% endif %}>{{ p }}</option>
      {% endfor %}
    </select>
  </label>

  <!-- é¢„è®¾æ—¶é—´ -->
  <label>æœ€è¿‘ï¼š
    <select name="preset" onchange="this.form.submit()">
      <option value="">è‡ªå®šä¹‰</option>
      <option value="7">7 å¤©</option>
      <option value="30" selected>30 å¤©</option>
      <option value="90">90 å¤©</option>
    </select>
  </label>

  <!-- è‡ªå®šä¹‰æ—¥æœŸ -->
  <label>ä»ï¼š<input type="date" name="start" value="{{ start_dt[:10] }}"></label>
  <label>åˆ°ï¼š<input type="date" name="end"   value="{{ end_dt[:10] }}"></label>
  <button type="submit">ç­›é€‰</button>
</form>

<table>
<thead>
  <tr>
    <th>#</th><th>é¦–å¯(Beijing)</th><th>é¦–å¯(US)</th>
    <th>IP</th><th>å½’å±åœ°</th><th>æ‰“å¼€æ¬¡æ•°</th><th>UA è§£æ</th>
  </tr>
</thead>
<tbody>
  {% for ev in events %}
  <tr>
    <td>{{ loop.index }}</td>
    <td>{{ ev.time_cn }}</td>
    <td>{{ ev.time_us }}</td>
    <td>{{ ev.ip }}</td>
    <td>{{ ev.location }}</td>
    <td>{{ ev.count }}</td>
    <td>{{ ev.ua_desc }}</td>
  </tr>
  {% endfor %}
</tbody>
</table>

<a href="{{ url_for('dashboard') }}">æŸ¥çœ‹ç»Ÿè®¡ä»ªè¡¨ç›˜</a>

