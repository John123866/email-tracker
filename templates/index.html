{% extends "layout.html" %}
{% block content %}
<div class="notice-box">
  <strong>ğŸ“¢ æ³¨æ„äº‹é¡¹ï¼š</strong><br>
  åœ¨æ‚¨çš„é‚®ä»¶ HTML ä¸­åµŒå…¥ä»¥ä¸‹åƒç´ è¿½è¸ªä»£ç ï¼š<br>
  <code>&lt;img src=&quot;https://email-tracker-y1k4.onrender.com/track/YOUR_ID.png&quot; width=&quot;1&quot; height=&quot;1&quot;&gt;</code><br>
  è¯·å°† <code>YOUR_ID</code> æ›¿æ¢ä¸ºæ‚¨ä¸ºè¯¥é‚®ä»¶è®¾ç½®çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚
</div>

<form method="get" action="/" class="filter-form">
  <label for="filter_id"><strong>ğŸ“‚ ç­›é€‰ Tracking IDï¼š</strong></label>
  <select id="filter_id" name="filter_id" onchange="this.form.submit()">
    <option value="">-- è¯·é€‰æ‹© --</option>
    {% for id in all_ids %}
      <option value="{{ id }}" {% if selected_id == id %}selected{% endif %}>{{ id }}</option>
    {% endfor %}
  </select>
</form>

<a href="/dashboard" class="btn-dashboard">ğŸ“Š æŸ¥çœ‹å…¨éƒ¨ç»Ÿè®¡ä»ªè¡¨ç›˜</a>

{% if selected_id %}
  <h3>ğŸ” Tracking ID: <code>{{ selected_id }}</code></h3>
  {% if events %}
    <table class="styled-table">
      <thead>
        <tr><th>#</th><th>åŒ—äº¬æ—¶é—´</th><th>ç¾å›½æ—¶é—´</th><th>IP</th><th>åœ°ç†ä½ç½®</th><th>User-Agent</th></tr>
      </thead>
      <tbody>
        {% for e in events %}
        <tr>
          <td>{{ loop.index }}</td>
          <td>{{ e.time_cn }}</td>
          <td>{{ e.time_us }}</td>
          <td>{{ e.ip }}</td>
          <td>{{ e.location }}</td>
          <td>{{ e.ua }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>è¯¥ ID æš‚æ— è®°å½•ã€‚</p>
  {% endif %}
{% endif %}
{% endblock %}
